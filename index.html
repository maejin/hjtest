<!--<link rel="manifest" href="/hjtest/manifest.json" />-->
<script src='/hjtest/sw.js'></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>

<script src="/hjtest/generator_base.js"></script>
<script src="/hjtest/notification_generator_base.js"></script>
<script src="/hjtest/notification_generator.js"></script>

<script language='javascript'>
/*
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('/hjtest/sw.js').then(function(registration) {
      // Registration was successful
      console.log('ServiceWorker registration successful with scope: ', registration.scope);
    }, function(err) {
      // registration failed :(
      console.log('ServiceWorker registration failed: ', err);
    });
  });
}
*/

navigator.serviceWorker.register('/hjtest/sw.js');

Notification.requestPermission(function(result) {
  if (result === 'granted') {
    navigator.serviceWorker.ready.then(function(registration) {
		//registration.showNotification('Notification with ServiceWorker');
    });
  }
});

$(document).ready(function() {

	var requirementsElement = document.getElementById('requirements'),
	element = document.getElementById('test-case');
	var generator = new NotificationGenerator(requirementsElement, element);

	generator.deserialize(document.location.hash);
	

	//var generator = new NotificationGenerator();

	// Defines the behavior of the display button. It will be disabled
          // when the notification is being displayed, and enabled again when
          // that either succeeded, or an error occurred.
          var displayButton = document.getElementById('action-display');
          displayButton.addEventListener('click', function() {
            displayButton.disabled = true;
            generator.display().then(function() {
              displayButton.disabled = false;
            });
          });
       
          // Listen for messages received from the Service Worker.
          navigator.serviceWorker.addEventListener('message', function(message) {
            alert(message.data);
          });
          generator.registerServiceWorker('/hjtest/');
          generator.requestPermission();


});


</script>


<div id="test-case" class="test-case">
        <ul id="requirements" class="requirements">
          <li>Unable to execute the JavaScript code.</li>
        </ul>

       
		제목 : <input type='text' id='title' value='TEST!!'>
		내용 : <input type='text' id='body' placeholder='내용을 입력하세요' value=''>
		<input type='hidden' id='direction' value='ltr'>
		<input type='hidden' id='image' value='/hjtest/images/my-push-logo.png'>
		<input type='hidden' id='icon' value='/hjtest/images/badge.png'>
		<input type='hidden' id='badge' value='/hjtest/images/badge.png'>

		<input type='hidden' id='tag' value=''>
		<input type='hidden' id='actions' data-id="3" value='Yes$$/hjtest/images/badge.png|No$$/hjtest/images/badge.png'>
		<input type="checkbox" checked id="persistent" style='visibility:hidden' />
		<input type="checkbox" id="notification_close_event" style='visibility:hidden' />

		<input type='hidden' id='action' data-id="0" value='default'>
		<input type="checkbox" checked id="close" style='visibility:hidden' />


      
        <p>
          <button id="action-display">푸쉬 테스트</button>
        </p>
      </div>